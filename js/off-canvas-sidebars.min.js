/**
 * Off-Canvas Sidebars plugin
 *
 * @author  Jory Hogeveen <info@keraweb.nl>
 * @package Off_Canvas_Sidebars
 * @since   0.2.0
 * @version 0.5.7
 * @global  ocsOffCanvasSidebars
 * @preserve
 */
if(void 0===ocsOffCanvasSidebars)var ocsOffCanvasSidebars={late_init:!1,site_close:!0,link_close:!0,disable_over:!1,hide_control_classes:!1,scroll_lock:!1,legacy_css:!1,css_prefix:"ocs",sidebars:{},_debug:!1};!function($){var $document=$(document),$window=$(window),$html=$("html"),$body=$("body");ocsOffCanvasSidebars.slidebarsController=!1,ocsOffCanvasSidebars.useAttributeSettings=!1,ocsOffCanvasSidebars.container=!1,ocsOffCanvasSidebars._touchmove=!1,ocsOffCanvasSidebars._toolbar=$body.hasClass("admin-bar")?$("#wpadminbar"):null,$document.on("touchmove",(function(){ocsOffCanvasSidebars._touchmove=!0})),$document.on("touchstart",(function(){ocsOffCanvasSidebars._touchmove=!1})),ocsOffCanvasSidebars.init=function(){return $("#"+ocsOffCanvasSidebars.css_prefix+"-site").length&&"undefined"!=typeof slidebars?(ocsOffCanvasSidebars._checkDisableOver=function(sidebarId){var check=!0,disableOver=parseInt(ocsOffCanvasSidebars._getSetting("disable_over",sidebarId),10);return disableOver&&!isNaN(disableOver)&&$window.width()>disableOver&&(check=!1),check},ocsOffCanvasSidebars._getSetting=function(key,sidebarId){var prefix=ocsOffCanvasSidebars.css_prefix,setting=!1;if(null==sidebarId||sidebarId||(sidebarId=ocsOffCanvasSidebars.slidebarsController.getActiveSlidebar()),sidebarId){if(setting=null,$.isEmptyObject(ocsOffCanvasSidebars.sidebars)||ocsOffCanvasSidebars.useAttributeSettings)setting=$("#"+sidebarId).attr("data-ocs-"+key);else if(sidebarId=sidebarId.replace(prefix+"-",""),ocsOffCanvasSidebars.sidebars.hasOwnProperty(sidebarId)){var sidebar=ocsOffCanvasSidebars.sidebars[sidebarId];sidebar.hasOwnProperty(key)&&(setting=sidebar[key])}return null==setting&&(setting=ocsOffCanvasSidebars._getSetting(key,null)),setting}return ocsOffCanvasSidebars.hasOwnProperty(key)&&!ocsOffCanvasSidebars.useAttributeSettings?setting=ocsOffCanvasSidebars[key]:void 0===(setting=$("#"+prefix+"-site").attr("data-ocs-"+key))&&(setting=!1),setting},ocsOffCanvasSidebars._getTranslateAxis=function(obj,axis){var transformMatrix=(obj=$(obj)).css("-webkit-transform")||obj.css("-moz-transform")||obj.css("-ms-transform")||obj.css("-o-transform")||obj.css("transform");if(transformMatrix){var matrix=transformMatrix.replace(/[^0-9\-.,]/g,"").split(","),val=0;switch(axis){case"x":val=matrix[12]||matrix[4];break;case"y":val=matrix[13]||matrix[5];break;case"z":val=matrix[14]||matrix[6]}return parseFloat(val)}return 0},ocsOffCanvasSidebars.container=$("[data-canvas=container]"),$window.trigger("ocs_before",[this]),ocsOffCanvasSidebars.slidebarsController||(ocsOffCanvasSidebars.slidebarsController=new slidebars),ocsOffCanvasSidebars.slidebarsController?(ocsOffCanvasSidebars.legacy_css&&(ocsOffCanvasSidebars.slidebarsController.legacy=!0,$html.addClass("ocs-legacy")),$window.trigger("ocs_loaded",[this]),ocsOffCanvasSidebars.slidebarsController.reinit(),$html.addClass("ocs-initialized"),$window.trigger("ocs_initialized",[this]),ocsOffCanvasSidebars._toolbar&&(ocsOffCanvasSidebars.events.add_action("opening","ocs_toolbar",(function(e,sidebar_id,sidebar){if("fixed"===ocsOffCanvasSidebars._toolbar.css("position")&&"bottom"!==sidebar.side){var offset=$html.offset().top,currentOffset=parseInt(sidebar.element.data("admin-bar-offset-top"),10),prop="padding-top";currentOffset||(currentOffset=0),offset&&("top"===sidebar.side&&(prop="margin-top"),sidebar.element.css(prop,"+="+(offset-currentOffset)).data("admin-bar-offset-top",offset))}})),ocsOffCanvasSidebars.events.add_action("closed","ocs_toolbar",(function(e,sidebar_id,sidebar){if("bottom"!==sidebar.side){var prop="padding-top",offset=sidebar.element.data("admin-bar-offset-top");offset&&("top"===sidebar.side&&(prop="margin-top"),sidebar.element.css(prop,"-="+offset).data("admin-bar-offset-top",0))}}))),ocsOffCanvasSidebars.events.add_action("opening opened closing closed","ocs_fixed_compat",(function(e,sidebar_id,sidebar){var duration=1e3*parseFloat(sidebar.element.css("transitionDuration"));if("top"===sidebar.side||"bottom"===sidebar.side){var elements=ocsOffCanvasSidebars.getFixedElements();if(ocsOffCanvasSidebars.legacy_css){if("top"===sidebar.side&&"overlay"!==sidebar.style&&"reveal"!==sidebar.style){var offset=sidebar.element.height();ocsOffCanvasSidebars._toolbar&&"fixed"===ocsOffCanvasSidebars._toolbar.css("position")&&(offset+=$html.offset().top),offset&&("opening"===e.type?(ocsOffCanvasSidebars.cssCompat(elements,"transition","top "+duration+"ms"),elements.css("top","+="+offset).data("ocs-offset-top",offset)):"closing"===e.type&&(elements.css("top","-="+elements.data("ocs-offset-top")).data("ocs-offset-top",0),setTimeout((function(){ocsOffCanvasSidebars.cssCompat(elements,"transition","")}),duration)))}}else"opening"===e.type||"closing"===e.type?ocsOffCanvasSidebars.cssCompat(elements,"transition","transform "+duration+"ms"):"opened"!==e.type&&"closed"!==e.type||ocsOffCanvasSidebars.cssCompat(elements,"transition","");$window.trigger("slidebar_event",[e.type,sidebar])}})),"function"==typeof ocsOffCanvasSidebars.setupTriggers&&ocsOffCanvasSidebars.setupTriggers(),$window.trigger("ocs_after",[this]),!0):(ocsOffCanvasSidebars.debug("Cannot initialize Slidebars"),!1)):(ocsOffCanvasSidebars.debug("Container or Slidebars not found, init stopped"),!1)},ocsOffCanvasSidebars.setSidebarDefaultSettings=function(sidebarId){var defaults={overwrite_global_settings:!1,site_close:ocsOffCanvasSidebars._getSetting("site_close"),disable_over:ocsOffCanvasSidebars._getSetting("disable_over"),hide_control_classes:ocsOffCanvasSidebars._getSetting("hide_control_classes"),scroll_lock:ocsOffCanvasSidebars._getSetting("scroll_lock")};ocsOffCanvasSidebars.sidebars.hasOwnProperty(sidebarId)?ocsOffCanvasSidebars._getSetting("overwrite_global_settings",sidebarId)||$.extend(ocsOffCanvasSidebars.sidebars[sidebarId],defaults):ocsOffCanvasSidebars.sidebars[sidebarId]=defaults},ocsOffCanvasSidebars.setupTriggers=function(){var controller=ocsOffCanvasSidebars.slidebarsController,prefix=ocsOffCanvasSidebars.css_prefix,$sidebarElements=$("."+prefix+"-slidebar");if(!$sidebarElements.length)return ocsOffCanvasSidebars.debug("No sidebars found"),!1;$sidebarElements.each((function(){var $this,id=$(this).data("ocs-sidebar-id"),css_id=prefix+"-"+id;ocsOffCanvasSidebars.setSidebarDefaultSettings(id),$document.on("touchend click","."+prefix+"-toggle-"+id,(function(e){e.stopPropagation(),e.preventDefault(),!0!==ocsOffCanvasSidebars._touchmove&&ocsOffCanvasSidebars._checkDisableOver(css_id)&&controller.toggle(css_id)})),$document.on("touchend click","."+prefix+"-open-"+id,(function(e){e.stopPropagation(),e.preventDefault(),!0!==ocsOffCanvasSidebars._touchmove&&ocsOffCanvasSidebars._checkDisableOver(css_id)&&controller.open(css_id)})),$document.on("touchend click","."+prefix+"-close-"+id,(function(e){e.stopPropagation(),e.preventDefault(),!0!==ocsOffCanvasSidebars._touchmove&&controller.close(css_id)}))})),$document.on("touchend click","."+prefix+"-close--all",(function(e){e.preventDefault(),e.stopPropagation(),controller.close()})),$("a").not("."+prefix+"-trigger").on("touchend click",(function(){!0!==ocsOffCanvasSidebars._touchmove&&ocsOffCanvasSidebars._getSetting("link_close",!1)&&($(this).parents("."+prefix+"-trigger").length||controller.close())})),$(controller.events).on("opening",(function(e,sidebar_id){var sidebar=ocsOffCanvasSidebars.slidebarsController.getSlidebar(sidebar_id),scrollLock=ocsOffCanvasSidebars._getSetting("scroll_lock",sidebar_id),scrollFixed=$html[0].scrollHeight>$html[0].clientHeight,scrollTop=$html.scrollTop();ocsOffCanvasSidebars._getSetting("site_close",sidebar_id)&&ocsOffCanvasSidebars.container.addClass(prefix+"-close--all"),$html.addClass("ocs-sidebar-active ocs-sidebar-active-"+sidebar_id+" ocs-sidebar-location-"+sidebar.side),ocsOffCanvasSidebars.legacy_css&&ocsOffCanvasSidebars.is_touch()&&("overlay"===sidebar.style||"left"!==sidebar.side&&"right"!==sidebar.side||(scrollLock=!0,scrollFixed=!0)),scrollLock&&($html.addClass("ocs-scroll-lock"),scrollFixed&&($body.css("top","-="+scrollTop),$html.data("ocs-scroll-fixed",scrollTop).addClass("ocs-scroll-fixed"))),ocsOffCanvasSidebars.events.do_action("opening",[e,sidebar_id,sidebar])})),$(controller.events).on("opened closing",(function(e,sidebar_id){var sidebar=ocsOffCanvasSidebars.slidebarsController.getSlidebar(sidebar_id);ocsOffCanvasSidebars.events.do_action(e.type,[e,sidebar_id,sidebar])})),$(controller.events).on("closed",(function(e,sidebar_id){var sidebar=ocsOffCanvasSidebars.slidebarsController.getSlidebar(sidebar_id),scrollTop=$html.hasClass("ocs-scroll-fixed");ocsOffCanvasSidebars.container.removeClass(prefix+"-close--all"),$html.removeClass("ocs-sidebar-active ocs-scroll-lock ocs-scroll-fixed ocs-sidebar-active-"+sidebar_id+"ocs-sidebar-location-"+sidebar.side),scrollTop&&(scrollTop=parseInt($html.data("ocs-scroll-fixed"),10),$body.css("top","+="+scrollTop),$body.css("top")||$body.css("top",""),$html.data("ocs-scroll-fixed",0),ocsOffCanvasSidebars.slidebarsController.css(),$html.scrollTop(scrollTop)),ocsOffCanvasSidebars.events.do_action("closed",[e,sidebar_id,sidebar])}));var disableOver=function(){var prefix=ocsOffCanvasSidebars.css_prefix;$sidebarElements.each((function(){var id=$(this).data("ocs-sidebar-id"),sidebar_id=prefix+"-"+id,control_classes="."+prefix+"-toggle-"+id+", ."+prefix+"-open-"+id,hide_control_classes=ocsOffCanvasSidebars._getSetting("hide_control_classes",sidebar_id);ocsOffCanvasSidebars._checkDisableOver(sidebar_id)?hide_control_classes&&$(control_classes).show():(controller.isActiveSlidebar(sidebar_id)&&controller.close(),hide_control_classes&&$(control_classes).hide())}))};disableOver(),$window.on("resize",disableOver)},ocsOffCanvasSidebars.getFixedElements=function(){return $("#"+ocsOffCanvasSidebars.css_prefix+"-site *").filter((function(){return"fixed"===$(this).css("position")}))},ocsOffCanvasSidebars.cssCompat=function(elem,prop,value){var data={};data["-webkit-"+prop]=value,data["-moz-"+prop]=value,data["-o-"+prop]=value,data[prop]=value,$(elem).css(data)},ocsOffCanvasSidebars.events={do_action:function(event,params){ocsOffCanvasSidebars.events[event]&&ocsOffCanvasSidebars.events[event].forEach((function(actions,priority){if("object"!=typeof actions)return!0;Object.values(actions).forEach((function(callback,name){callback.apply(null,params)}))}))},add_action:function(event,name,callback,priority){Array.isArray(event)?event.forEach((function(event){ocsOffCanvasSidebars.events.add_action(event,name,callback,priority)})):(priority||(priority=10),ocsOffCanvasSidebars.events.hasOwnProperty(event)||(ocsOffCanvasSidebars.events[event]=[]),"object"!=typeof ocsOffCanvasSidebars.events[event][priority]&&(ocsOffCanvasSidebars.events[event][priority]={}),ocsOffCanvasSidebars.events[event][priority][name]=callback)},remove_action:function(event,name,priority){Array.isArray(event)?event.forEach((function(event){ocsOffCanvasSidebars.events.remove_action(event,name,priority)})):(priority||(priority=10),ocsOffCanvasSidebars.events[event]&&ocsOffCanvasSidebars.events[event][priority]&&delete ocsOffCanvasSidebars.events[event][priority][name])}},ocsOffCanvasSidebars.is_touch=function(){return 0<navigator.maxTouchPoints},ocsOffCanvasSidebars.debug=function(message){ocsOffCanvasSidebars._debug&&console.log("Off-Canvas Sidebars: "+message)},ocsOffCanvasSidebars.late_init?$window.load(ocsOffCanvasSidebars.init):ocsOffCanvasSidebars.init()}(jQuery);